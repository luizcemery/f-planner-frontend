<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>F-Planner AI</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 40px auto; }
    input, button { padding: 10px; font-size: 16px; }
    button { cursor: pointer; }
    pre { background: #f4f4f4; padding: 10px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>F-Planner AI</h1>

  <input id="prompt" placeholder="Digite sua pergunta" size="40" />
  <button onclick="send()">Enviar</button>

  <pre id="output"></pre>

  <script>
    const BACKEND_URL = "https://f-planner-backend.onrender.com"
    
    async function send() {
      const prompt = document.getElementById("prompt").value.trim()
      const output = document.getElementById("output")
    
      if (!prompt) {
        output.innerText = "Digite uma pergunta primeiro."
        return
      }
    
      output.innerText = "Pensando..."
    
      try {
        const controller = new AbortController()
        setTimeout(() => controller.abort(), 30000) // 30s timeout
    
        const res = await fetch(
          `${BACKEND_URL}/ask?prompt=` + encodeURIComponent(prompt),
          { signal: controller.signal }
        )
    
        const data = await res.json()
        output.innerText = data.response || data.error || "Resposta vazia do servidor"
      } catch (err) {
        output.innerText = "Servidor indispon√≠vel ou demorou para responder"
        console.error(err)
      }
    }
    </script>    
</body>
</html>
